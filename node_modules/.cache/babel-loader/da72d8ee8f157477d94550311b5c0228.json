{"ast":null,"code":"var richTypes = {\n  Date: true,\n  RegExp: true,\n  String: true,\n  Number: true\n};\nexport default function diff(obj, newObj) {\n  var options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {\n    cyclesFix: true\n  };\n  var _stack = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : [];\n  var diffs = [];\n  var isObjArray = Array.isArray(obj);\n  var _loop = function _loop(key) {\n    var objKey = obj[key];\n    var path = isObjArray ? +key : key;\n    if (!(key in newObj)) {\n      diffs.push({\n        type: \"REMOVE\",\n        path: [path],\n        oldValue: obj[key]\n      });\n      return \"continue\";\n    }\n    var newObjKey = newObj[key];\n    var areObjects = typeof objKey === \"object\" && typeof newObjKey === \"object\";\n    if (objKey && newObjKey && areObjects && !richTypes[Object.getPrototypeOf(objKey).constructor.name] && (!options.cyclesFix || !_stack.includes(objKey))) {\n      var nestedDiffs = diff(objKey, newObjKey, options, options.cyclesFix ? _stack.concat([objKey]) : []);\n      diffs.push.apply(diffs, nestedDiffs.map(function (difference) {\n        difference.path.unshift(path);\n        return difference;\n      }));\n    } else if (objKey !== newObjKey && !(areObjects && (isNaN(objKey) ? objKey + \"\" === newObjKey + \"\" : +objKey === +newObjKey))) {\n      diffs.push({\n        path: [path],\n        type: \"CHANGE\",\n        value: newObjKey,\n        oldValue: objKey\n      });\n    }\n  };\n  for (var key in obj) {\n    var _ret = _loop(key);\n    if (_ret === \"continue\") continue;\n  }\n  var isNewObjArray = Array.isArray(newObj);\n  for (var _key in newObj) {\n    if (!(_key in obj)) {\n      diffs.push({\n        type: \"CREATE\",\n        path: [isNewObjArray ? +_key : _key],\n        value: newObj[_key]\n      });\n    }\n  }\n  return diffs;\n}","map":{"version":3,"names":["richTypes","Date","RegExp","String","Number","diff","obj","newObj","options","cyclesFix","_stack","diffs","isObjArray","Array","isArray","key","objKey","path","push","type","oldValue","newObjKey","areObjects","Object","getPrototypeOf","constructor","name","includes","nestedDiffs","concat","apply","map","difference","unshift","isNaN","value","isNewObjArray"],"sources":["/Users/srartese/Desktop/Repos/port22/node_modules/microdiff/dist/index.js"],"sourcesContent":["const richTypes = { Date: true, RegExp: true, String: true, Number: true };\nexport default function diff(\n\tobj,\n\tnewObj,\n\toptions = { cyclesFix: true },\n\t_stack = []\n) {\n\tlet diffs = [];\n\tconst isObjArray = Array.isArray(obj);\n\tfor (const key in obj) {\n\t\tconst objKey = obj[key];\n\t\tconst path = isObjArray ? +key : key;\n\t\tif (!(key in newObj)) {\n\t\t\tdiffs.push({\n\t\t\t\ttype: \"REMOVE\",\n\t\t\t\tpath: [path],\n\t\t\t\toldValue: obj[key],\n\t\t\t});\n\t\t\tcontinue;\n\t\t}\n\t\tconst newObjKey = newObj[key];\n\t\tconst areObjects =\n\t\t\ttypeof objKey === \"object\" && typeof newObjKey === \"object\";\n\t\tif (\n\t\t\tobjKey &&\n\t\t\tnewObjKey &&\n\t\t\tareObjects &&\n\t\t\t!richTypes[Object.getPrototypeOf(objKey).constructor.name] &&\n\t\t\t(!options.cyclesFix || !_stack.includes(objKey))\n\t\t) {\n\t\t\tconst nestedDiffs = diff(\n\t\t\t\tobjKey,\n\t\t\t\tnewObjKey,\n\t\t\t\toptions,\n\t\t\t\toptions.cyclesFix ? _stack.concat([objKey]) : []\n\t\t\t);\n\t\t\tdiffs.push.apply(\n\t\t\t\tdiffs,\n\t\t\t\tnestedDiffs.map((difference) => {\n\t\t\t\t\tdifference.path.unshift(path);\n\t\t\t\t\treturn difference;\n\t\t\t\t})\n\t\t\t);\n\t\t} else if (\n\t\t\tobjKey !== newObjKey &&\n\t\t\t!(\n\t\t\t\tareObjects &&\n\t\t\t\t(isNaN(objKey)\n\t\t\t\t\t? objKey + \"\" === newObjKey + \"\"\n\t\t\t\t\t: +objKey === +newObjKey)\n\t\t\t)\n\t\t) {\n\t\t\tdiffs.push({\n\t\t\t\tpath: [path],\n\t\t\t\ttype: \"CHANGE\",\n\t\t\t\tvalue: newObjKey,\n\t\t\t\toldValue: objKey,\n\t\t\t});\n\t\t}\n\t}\n\tconst isNewObjArray = Array.isArray(newObj);\n\tfor (const key in newObj) {\n\t\tif (!(key in obj)) {\n\t\t\tdiffs.push({\n\t\t\t\ttype: \"CREATE\",\n\t\t\t\tpath: [isNewObjArray ? +key : key],\n\t\t\t\tvalue: newObj[key],\n\t\t\t});\n\t\t}\n\t}\n\treturn diffs;\n}\n"],"mappings":"AAAA,IAAMA,SAAS,GAAG;EAAEC,IAAI,EAAE,IAAI;EAAEC,MAAM,EAAE,IAAI;EAAEC,MAAM,EAAE,IAAI;EAAEC,MAAM,EAAE;AAAK,CAAC;AAC1E,eAAe,SAASC,IAAI,CAC3BC,GAAG,EACHC,MAAM,EAGL;EAAA,IAFDC,OAAO,uEAAG;IAAEC,SAAS,EAAE;EAAK,CAAC;EAAA,IAC7BC,MAAM,uEAAG,EAAE;EAEX,IAAIC,KAAK,GAAG,EAAE;EACd,IAAMC,UAAU,GAAGC,KAAK,CAACC,OAAO,CAACR,GAAG,CAAC;EAAC,2BAC3BS,GAAG;IACb,IAAMC,MAAM,GAAGV,GAAG,CAACS,GAAG,CAAC;IACvB,IAAME,IAAI,GAAGL,UAAU,GAAG,CAACG,GAAG,GAAGA,GAAG;IACpC,IAAI,EAAEA,GAAG,IAAIR,MAAM,CAAC,EAAE;MACrBI,KAAK,CAACO,IAAI,CAAC;QACVC,IAAI,EAAE,QAAQ;QACdF,IAAI,EAAE,CAACA,IAAI,CAAC;QACZG,QAAQ,EAAEd,GAAG,CAACS,GAAG;MAClB,CAAC,CAAC;MACF;IACD;IACA,IAAMM,SAAS,GAAGd,MAAM,CAACQ,GAAG,CAAC;IAC7B,IAAMO,UAAU,GACf,OAAON,MAAM,KAAK,QAAQ,IAAI,OAAOK,SAAS,KAAK,QAAQ;IAC5D,IACCL,MAAM,IACNK,SAAS,IACTC,UAAU,IACV,CAACtB,SAAS,CAACuB,MAAM,CAACC,cAAc,CAACR,MAAM,CAAC,CAACS,WAAW,CAACC,IAAI,CAAC,KACzD,CAAClB,OAAO,CAACC,SAAS,IAAI,CAACC,MAAM,CAACiB,QAAQ,CAACX,MAAM,CAAC,CAAC,EAC/C;MACD,IAAMY,WAAW,GAAGvB,IAAI,CACvBW,MAAM,EACNK,SAAS,EACTb,OAAO,EACPA,OAAO,CAACC,SAAS,GAAGC,MAAM,CAACmB,MAAM,CAAC,CAACb,MAAM,CAAC,CAAC,GAAG,EAAE,CAChD;MACDL,KAAK,CAACO,IAAI,CAACY,KAAK,CACfnB,KAAK,EACLiB,WAAW,CAACG,GAAG,CAAC,UAACC,UAAU,EAAK;QAC/BA,UAAU,CAACf,IAAI,CAACgB,OAAO,CAAChB,IAAI,CAAC;QAC7B,OAAOe,UAAU;MAClB,CAAC,CAAC,CACF;IACF,CAAC,MAAM,IACNhB,MAAM,KAAKK,SAAS,IACpB,EACCC,UAAU,KACTY,KAAK,CAAClB,MAAM,CAAC,GACXA,MAAM,GAAG,EAAE,KAAKK,SAAS,GAAG,EAAE,GAC9B,CAACL,MAAM,KAAK,CAACK,SAAS,CAAC,CAC1B,EACA;MACDV,KAAK,CAACO,IAAI,CAAC;QACVD,IAAI,EAAE,CAACA,IAAI,CAAC;QACZE,IAAI,EAAE,QAAQ;QACdgB,KAAK,EAAEd,SAAS;QAChBD,QAAQ,EAAEJ;MACX,CAAC,CAAC;IACH;EAAC;EAjDF,KAAK,IAAMD,GAAG,IAAIT,GAAG,EAAE;IAAA,iBAAZS,GAAG;IAAA,yBASZ;EAyCF;EACA,IAAMqB,aAAa,GAAGvB,KAAK,CAACC,OAAO,CAACP,MAAM,CAAC;EAC3C,KAAK,IAAMQ,IAAG,IAAIR,MAAM,EAAE;IACzB,IAAI,EAAEQ,IAAG,IAAIT,GAAG,CAAC,EAAE;MAClBK,KAAK,CAACO,IAAI,CAAC;QACVC,IAAI,EAAE,QAAQ;QACdF,IAAI,EAAE,CAACmB,aAAa,GAAG,CAACrB,IAAG,GAAGA,IAAG,CAAC;QAClCoB,KAAK,EAAE5B,MAAM,CAACQ,IAAG;MAClB,CAAC,CAAC;IACH;EACD;EACA,OAAOJ,KAAK;AACb"},"metadata":{},"sourceType":"module"}